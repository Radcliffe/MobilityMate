<!DOCTYPE html>
<html>
<head>
    <style type="text/css">
        html, body {
            height: 100%;
            margin: 0;
            background-color: #E5E5E5;
            font-family: 'RobotoDraft', sans-serif;
        }

        #addData {
            display: none;
        }

        #map-canvas {
            height: 500px;
            margin: 0;
            padding: 0;
            display: block;
        }

        .heading {
            font-size: 20px;
        }
        
        .checkbox-grid li {
            display: block;
            float: left;
            width: 50%;
            color: #ffffff;
            background-color: #000000;
            font-size: 15px;
        }

        .site-footer, .map-class:after {
            height: 140px;
            width: 360px;
        }

        .site-footer {
            background: black;
        }

        core-header-panel {
            height: 100%;
            overflow: auto;
            -webkit-overflow-scrolling: touch;
        }

        core-toolbar {
            background: #03a9f4;
            color: white;
        }

        #tabs {
            width: 100%;
            margin: 0;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            text-transform: uppercase;
        }

        paper-button[raised].colored {
            background: #4285f4;
            color: #fff;
        }

        paper-dropdown-menu {
            box-sizing: border-box;
            width: 170px;
        }

        core-menu {
            box-sizing: border-box;
            width: 170px;
        }

        paper-item {
            overflow: hidden;
            white-space: nowrap;
            text-overflow: ellipsis;
        }

        select {
            font-size: 17px;
        }
        
        .list {
          display: block;
          border: 1px solid #ccc;
          border-bottom: none;
          background: #666;
          color: white;
          list-style: none;
          margin: 0;
          padding: 0;
        }

        .list > * {
          height: 40px;
          line-height: 40px;
          padding: 0 20px;
          border-bottom: 1px solid #ccc;
        }

        .list > *.core-selected {
          background: #333;
        }


    </style>
    <title>Mobility Mate</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <script type="text/javascript"
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBu1Q03jj8ALdicN8E2M1ORIRU9jJqPqvA">
    </script>
    <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.4.min.js">
    </script>
    <script src="components/webcomponentsjs/webcomponents.js"></script>
    <link rel="import" href="components/font-roboto/roboto.html">
    <link rel="import" href="components/core-header-panel/core-header-panel.html">
    <link rel="import" href="components/core-toolbar/core-toolbar.html">
    <link rel="import" href="components/paper-tabs/paper-tabs.html">
    <link rel="import" href="components/paper-input/paper-input-decorator.html">
    <link rel="import" href="components/paper-button/paper-button.html">
    <link rel="import" href="components/paper-dropdown-menu/paper-dropdown-menu.html">
    <link rel="import" href="components/core-collapse/core-collapse.html">
    <link rel="shortcut icon" href="icons/favicon.ico">
    <script type="text/javascript" src="scripts/main.js"></script>
</head>
<body>

<core-header-panel>

    <core-toolbar>
        <span><strong>Mobility Mate</strong></span>
        <paper-tabs id="tabs" selected="map" self-end>
            <paper-tab name="map">Map</paper-tab>
            <paper-tab name="new">New</paper-tab>
            <paper-tab name="about">About</paper-tab>
        </paper-tabs>

    </core-toolbar>
    <div class="heading" onclick="toggle()">Select amenities</div>
    <core-collapse>
        <core-selector class="list" selected="{{multiSelected}}" multi>
            <div>Curb cuts</div>
            <div>Lodging</div>
            <div>Restaurants</div>
            <div>Gas stations</div>
            <div>Entrances</div>
            <div>Elevators</div>
            <div>Rental Vehicles</div>
        </core-selector>
    </core-collapse>

    <div id="addData">
        <paper-button onclick="buttonClick()" raised>Get location</paper-button>
        <br>
        <paper-input-decorator label="Latitude" floatingLabel>
            <input id="latitude" is="core-input"/>
        </paper-input-decorator>
        <paper-input-decorator label="Longitude" floatingLabel>
            <input id="longitude" is="core-input"/>
        </paper-input-decorator>
        <br>
        Amenity:<br>
        <select name="amenity">
            <option value="-1"></option>
            <option value="0">Curb cuts</option>
            <option value="1">Lodging</option>
            <option value="2">Restaurants</option>
            <option value="3">Gas stations</option>
            <option value="4">Entrances</option>
            <option value="5">Elevators</option>
            <option value="6">Rental vehicles</option>
        </select>
        <paper-input-decorator label="Notes (optional)" floatingLabel>
            <input id="notes" is="core-input"></input>
        </paper-input-decorator>
        <br>
        <paper-button raised class="colored" onclick="submit()">Submit</paper-button>
    </div>
    <div id="map-canvas"></div>
</core-header-panel>
<script>
    var lat = 45;
    var lng = -93;
    var amenity;
    var tabs = document.querySelector('paper-tabs');
    tabs.addEventListener('core-select', function () {
        if (tabs.selected == 'new') {
            $('#map-canvas').hide(250);
            $('#addData').show(250);
            $('footer').hide(250)
            var collapse = document.querySelector('core-collapse');
            collapse.toggle();
        } else if (tabs.selected == 'map') {
            $('#map-canvas').show(250);
            $('#addData').hide(250);
            $('footer').show(250);
        }
    });
    function buttonClick() {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(
                    function (position) {
                        lat = position.coords.latitude.toFixed(7);
                        lng = position.coords.longitude.toFixed(7);
                        $('#latitude').val(lat);
                        $('#longitude').val(lng);
                    }
            );
        }
    }
    function submit() {
        lat = parseFloat($('#latitude').val());
        lng = parseFloat($('#longitude').val());
        color = parseInt($('select').val());
        notes = $('#notes').val();
        data = {latitude: lat, longitude: lng, amenity: color};
        if (color >= 0) {
            data = {latitude: lat, longitude: lng, amenity: color, notes: notes};
            $.post("/add", data, getMarkers);
            location.reload();
        }
    }
</script>
</body>
</html>
